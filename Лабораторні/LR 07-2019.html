<!DOCTYPE html>
<html>
<head>
	<title>Лабораторна робота № 7</title>
	<meta charset="utf-8">
	<style type="text/css">
	h1{
		text-align: center;
		font-size: 16pt;
		font-weight: bold;
		text-transform: uppercase;
	}
	h2{
		text-align: center;
		font-size: 14pt;
		font-weight: bold;
	}
	p, li{
		font-size: 14pt;
	}
	body{
		padding-left: 15%;
		padding-right: 15%;
	}
	.paper{
		max-width: 210mm;
	}
</style>
</head>
<body>
	<div class="paper">
		<h1>Інструментальні засоби візуального програмування. Лабораторна робота № 7 </h1>
		<h2>Робота з файлами та збереження структурованих даних</h2>
		<h2>Мета роботи</h2>
		<p>Ознайомитися з методами читання та запису даних у файл</p>
		<h2>Обладнання</h2>
		<p>Персональний комп'ютер. Пакет програм XAMPP. Текстовий редактор Sublime Text 3 або IDE NetBeans. Web-браузер Chrome, Firefox, Opera</p>
		<h2>Хід роботи</h2>
		<ol>
			<li>Впевнитись, що пакет XAMPP встановлено та web-сервер Apache запущений</li>
			<li>Перейти до каталогу <code>C:\xampp\htdocs\</code> та очистити його</li>
			
			<li>Створити текстовий файл <code>file.txt</code> і записати до нього довільний текст у 4 рядка</li>
			<li>Створити файл <code>files.php</code> та записати у нього наступний код:
			
				<p>
					<code>
						<xmp>
<?php
$file = fopen(__DIR__ . '/file.txt', 'r');
for ($i = 0; $i < 4; $i++) {
    echo fgets($file);
    echo '<br>';
}
fclose($file);			</xmp>
					</code>
				</p>
				</li>
				<ul>
   </ul>
			<li>Зберегти файл та переконатися, що на екрані з`явився ваш текст</li>
			<li>Для читання не дуже зручно використовувати цикл for із зазначенням конкретного числа рядків, які необхідно зчитати. Для цього можна використовувати функцію <code>feof()</code> - вона повертає true, якщо досягнуто кінець файлу. Програма, переписана з використанням функції <code>feof()</code> буде виглядати наступним чином:
					<p>
					<code>
						<xmp>
<?php
$file = fopen(__DIR__ . '/file.txt', 'r');
while (!feof($file)) {
    echo fgets($file);
    echo '<br>';
}
fclose($file);
						</xmp>
					</code>
				</p>
				</li>
				<li>Тепер запишемо дані в файл. Для того щоб відкрити файл для запису використовується та ж функція fopen, тільки в якості режиму роботи вказується 'w' (від write). А для запису даних в файл в рядок використовується функція fputs(). Напишемо програму, яка запише в файл file2.txt числа від 1 до 100.
							<p>
					<code>
						<xmp>
<?php
$file = fopen(__DIR__ . '/file2.txt', 'w');
for ($i = 1; $i < 101; $i++) {
    fputs($file, $i . PHP_EOL);
}
fclose($file);

						</xmp>
					</code>
				<strong>Примітка.</strong> Константа PHP_EOL містить в собі символ розриву рядків. При цьому для різних операційних систем (Windows або Unix-подібних) ці символи будуть різними.</p>
</li>
<li>Для перевірки існування файлу використовується функція <code>file_exists()</code>
<p>
					<code>
						<xmp>
<?php
myfile("counter.txt"); // Використовуєм функцію myfile, передаючи у якості аргументу ім'я файлу

function myfile($name) //Створюємо функцію для перевірки інування файлу
{
if (file_exists($name)) echo 'Файл існує';
else echo "Файл не існує";
}
?>
						</xmp>
					</code></p>
</li>
<li><p>Для визначення розміру файлу потрібно скористатися функцією <code>filesize()</code>:

					<code>
						<xmp>
<?php
myfile("counter.txt");

function myfile($name)
{
if (file_exists($name)) echo "Розмір файлу: ".filesize($name).' байт';
else echo "Файл не існує";
}
?>
						</xmp>
					</code>
</li>
<li>Видалити певний рядок з файлу можна за допомогою такого коду:
<code>
						<xmp>
<?php
$num_stroka = 5; //Видалимо 5 рядок з файлу
$file = file("counter.txt"); // Зчитуємо весь файл в масив

for($i = 0; $i < sizeof($file); $i++)
if($i == $num_stroka) unset($file[$i]);

$fp = fopen("counter.txt", "w");
fputs($fp, implode("", $file));
fclose($fp);
?>

						</xmp>
					</code>	
					</li>
			<li><p>Виконати індивідуальне завдання</p> 
				<ol>
					<li>Створіть текстовий файл та скрипт, який дозапише дані в кінець. Оберіть потрібний режим роботи з файлом</li>
					<li>Використовуючи функцію <code>file_get_contents()</code> прочитайте весь створений файл за раз</li>
				</ol>
			</li>
			<li>Впевнитись, що всі вихідні HTML-сторінки є валідними, використавши валідатор HTML-коду <code>https://validator.w3.org/</code>. За необхідності, виправити помилки та зауваження</li>
			
		</ol>
		<h2>Контрольні питання</h2>
		<ol>
		<li>На які етапи поділяється робота з файлами?</li>
			<li>Які існують режими відкриття файлу?</li>
			<li>Для чого використовується функція fgets()</li>
			<li>Якою функцією можна видалити рядки з файлу?</li>

		</ol>
	</div>
</body>
</html>